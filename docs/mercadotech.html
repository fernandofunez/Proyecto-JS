<!DOCTYPE html>
<html lang="es-AR">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no">
		<title>MercadoTECH - Tu e-shop.js</title>
		<link rel="stylesheet" href="https://blackrockdigital.github.io/startbootstrap-shop-item/vendor/bootstrap/css/bootstrap.min.css">
		<link rel="stylesheet" href="https://blackrockdigital.github.io/startbootstrap-shop-item/css/shop-item.css">
	<style>
		article{
			opacity: 0;
			animation: fadeIn 3s forwards;
		}
		@keyframes fadeIn {
			from {opacity: 0}
			to {opacity: 1 }
		}

	</style>
	</head>

	<body>
		<header class="navbar navbar-expand-lg navbar-dark bg-secondary fixed-top">
			<div class="container">
				<a class="navbar-brand font-weight-bold" href="#">&#x1F5A5; MercadoTECH</a>
				<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#menu" aria-controls="menu" aria-expanded="false" aria-label="Menu">
					<span class="navbar-toggler-icon"></span>
				</button>
				<nav class="collapse navbar-collapse" id="menu">
					<ul class="navbar-nav ml-auto">
						<li class="nav-item">
							<a id="login" class="nav-link" href="#">&#x1F512; Ingresar</a>
						</li>
						<li class="nav-item d-none">
							<a id="logout" class="nav-link" href="#">Bienvenid@ <span>{{USUARIO}}</span> [x]</a>
						</li>
					</ul>
				</nav>
			</div>
		</header>
		<main class="container">
			<h2 class="w-100 my-3 p-3 border">&#x2B50; Productos Destacados</h2>
			<nav id= "filtros">
				 <button class="btn  btn-dark" data-min="0" data-max="500">0-500</button>
				 <button class="btn  btn-dark" data-min="500" data-max="1500">500-1500</button>
				 <button class="btn  btn-dark"data-min="1500" data-max="99999">+ $1500</button>
			</nav>
			<!-- AREA PRODUCTOS DESTACADOS -->
			<section id="productos-destacados" class="row py-3">
				

			</section>
		</main>
		<footer class="py-5 bg-dark">
			<div class="container">
				<p class="m-0 text-center text-white">Â¡La mejor manera de comprar online!</p>
			</div>
		</footer>
		<script src="https://blackrockdigital.github.io/startbootstrap-shop-item/vendor/jquery/jquery.min.js"></script>
		<script src="https://blackrockdigital.github.io/startbootstrap-shop-item/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
		<script src="producto.class.js"></script>
		<script>
			let productos = null
	
	/*
		fetch("https://api.npoint.io/6b51ed82842567c3a283")
		
			.then (rta=>rta.json()) 
			.then(objetos => objetos.map(({Nombre,Stock,Precio,Imagen,Marca}) => new producto(Nombre,Stock,Precio,Imagen,Marca)))
			.then(productos=>productos.filter(producto => producto.precio < 300 && producto.stock > 100))
			.then(resultado=>{
			//1)Mostrar todos los productos...
			if(resultado instanceof Array){ //<-- si el resultado es una array

			
			resultado.forEach(producto => {
				producto.Mostrar()
			})
			
			}else{
				resultado.Mostrar()
			}
			
		})
		*/
	
		////////////////////////////////////////////

		const GET = async url => {
					let rta = await fetch(url)
					return await rta.json() //<-- Retornar convertido de JSON a Objetos genericos
				}				
				

				const aguanta = timeout => {//aguanta(3000)
					return new Promise(resolve => setTimeout(resolve,timeout) )


				}


				//////////////////////////////////////////////////////////////////////
				 document.querySelectorAll("#filtros button").forEach(filtro =>{
					filtro.onclick = (evento) =>{
						let rango = {
							min : evento.target.getAttribute("data-min"),
							max : evento.target.getAttribute("data-max")
						}
						console.log(rango)
					}
				 })
				window.onload = async () => {
					
					
					let objetos = await GET("https://api.npoint.io/6b51ed82842567c3a283")


					let catalogo =  Producto.armarCatalogo(objetos)

					if( catalogo instanceof Array ){ //<-- Si el resultado es una array

						catalogo.forEach( async producto => {
							await aguanta(5000)
							await producto.Mostrar()
						})

					} else {
						catalogo.Mostrar()
					}

				
				}


		</script>
	
	</body>
</html>




